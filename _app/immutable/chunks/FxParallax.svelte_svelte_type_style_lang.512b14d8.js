import{S as J,i as K,s as L,e as R,b as P,H as F,h as y,Z as G,_ as C,$ as Q,k as E,a as V,l as I,m as W,c as X,a0 as N,p as O,G as U,N as H,a1 as x,a2 as $,Y as ee,O as ie,n as z,a3 as M,w as te}from"./index.43f715bc.js";function T(l,e,i){const s=l.slice();return s[14]=e[i].format,s[15]=e[i].srcset,s}function Y(l){let e,i,s,h,u,d,g,b,k,f=l[7],a=[];for(let t=0;t<f.length;t+=1)a[t]=Z(T(l,f,t));let p=[{src:h=l[6].src},{srcset:u=l[6].srcset},{sizes:l[1]},{width:d=l[2]||l[6].width||void 0},{height:g=l[3]||l[6].height||void 0},{loading:l[4]},{decoding:l[5]},l[8]],_={};for(let t=0;t<p.length;t+=1)_=C(_,p[t]);return{c(){e=E("picture");for(let t=0;t<a.length;t+=1)a[t].c();i=V(),s=E("img"),this.h()},l(t){e=I(t,"PICTURE",{});var c=W(e);for(let r=0;r<a.length;r+=1)a[r].l(c);i=X(c),s=I(c,"IMG",{src:!0,srcset:!0,sizes:!0,width:!0,height:!0,loading:!0,decoding:!0}),c.forEach(y),this.h()},h(){N(s,_),O(s,"background",l[6].lqip)},m(t,c){P(t,e,c);for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(e,null);U(e,i),U(e,s),l[12](s),b||(k=[H(s,"click",l[10]),H(s,"load",l[11])],b=!0)},p(t,c){if(c&130){f=t[7];let r;for(r=0;r<f.length;r+=1){const q=T(t,f,r);a[r]?a[r].p(q,c):(a[r]=Z(q),a[r].c(),a[r].m(e,i))}for(;r<a.length;r+=1)a[r].d(1);a.length=f.length}N(s,_=x(p,[c&64&&!$(s.src,h=t[6].src)&&{src:h},c&64&&u!==(u=t[6].srcset)&&{srcset:u},c&2&&{sizes:t[1]},c&68&&d!==(d=t[2]||t[6].width||void 0)&&{width:d},c&72&&g!==(g=t[3]||t[6].height||void 0)&&{height:g},c&16&&{loading:t[4]},c&32&&{decoding:t[5]},c&256&&t[8]])),O(s,"background",t[6].lqip)},d(t){t&&y(e),ee(a,t),l[12](null),b=!1,ie(k)}}}function Z(l){let e,i,s;return{c(){e=E("source"),this.h()},l(h){e=I(h,"SOURCE",{type:!0,srcset:!0,sizes:!0}),this.h()},h(){z(e,"type",i="image/"+l[14]),z(e,"srcset",s=l[15]),z(e,"sizes",l[1])},m(h,u){P(h,e,u)},p(h,u){u&128&&i!==(i="image/"+h[14])&&z(e,"type",i),u&128&&s!==(s=h[15])&&z(e,"srcset",s),u&2&&z(e,"sizes",h[1])},d(h){h&&y(e)}}}function se(l){let e,i=l[6].src&&Y(l);return{c(){i&&i.c(),e=R()},l(s){i&&i.l(s),e=R()},m(s,h){i&&i.m(s,h),P(s,e,h)},p(s,[h]){s[6].src?i?i.p(s,h):(i=Y(s),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:F,o:F,d(s){i&&i.d(s),s&&y(e)}}}function le(l,e,i){const s=["src","sizes","width","height","loading","decoding","ref"];let h=G(e,s),{src:u=[]}=e,{sizes:d=void 0}=e,{width:g=void 0}=e,{height:b=void 0}=e,{loading:k="lazy"}=e,{decoding:f="async"}=e,{ref:a=void 0}=e;const p=["heic","heif","avif","webp","jpeg","jpg","png","gif","tiff"];let _={},t=[];function c(n){M.call(this,l,n)}function r(n){M.call(this,l,n)}function q(n){te[n?"unshift":"push"](()=>{a=n,i(0,a)})}return l.$$set=n=>{e=C(C({},e),Q(n)),i(8,h=G(e,s)),"src"in n&&i(9,u=n.src),"sizes"in n&&i(1,d=n.sizes),"width"in n&&i(2,g=n.width),"height"in n&&i(3,b=n.height),"loading"in n&&i(4,k=n.loading),"decoding"in n&&i(5,f=n.decoding),"ref"in n&&i(0,a=n.ref)},l.$$.update=()=>{if(l.$$.dirty&512&&u.length){const{list:n,lqip:A}=u.reduce((m,o)=>(o.base64?m.lqip=`url('${o.base64}') no-repeat center/cover`:m.list.push(o),m),{list:[],lqip:void 0}),j=[];for(const m of p){const o=n.filter(S=>S.format===m);if(o.length){o.sort((w,v)=>w.width-v.width);const{src:S,width:B,height:D}=o[o.length-1];j.push({format:m==="jpg"?"jpeg":m,srcset:o.reduce((w,v)=>[...w,`${v.src} ${v.width}w`],[]).join(","),src:S,width:B,height:D})}}i(6,_={...j.pop(),lqip:A}),i(7,t=j)}},[a,d,g,b,k,f,_,t,h,u,c,r,q]}class re extends J{constructor(e){super(),K(this,e,le,se,L,{src:9,sizes:1,width:2,height:3,loading:4,decoding:5,ref:0})}}export{re as S};
