import{s as D,e as R,i as P,C as U,g as j,T as F,U as C,V as H,j as I,a as K,k as E,l as L,c as Q,W as T,n as B,B as G,I as J,X as Z,S as x,J as $,m as k,Y as M,v as ee}from"./boolean_attributes.2cae78c3.js";import{e as N}from"./each.cfbc3656.js";import{S as ie,i as te}from"./Component.9f4eb370.js";function se(s,e){const i={},t={},l={$$scope:1};let a=s.length;for(;a--;){const u=s[a],d=e[a];if(d){for(const h in u)h in d||(t[h]=1);for(const h in d)l[h]||(i[h]=d[h],l[h]=1);s[a]=d}else for(const h in u)l[h]=1}for(const u in t)u in i||(i[u]=void 0);return i}function O(s,e,i){const t=s.slice();return t[14]=e[i].format,t[15]=e[i].srcset,t}function V(s){let e,i,t,l,a,u,d,h,p,g=N(s[7]),c=[];for(let n=0;n<g.length;n+=1)c[n]=W(O(s,g,n));let z=[{src:l=s[6].src},{srcset:a=s[6].srcset},{sizes:s[1]},{width:u=s[2]||s[6].width||void 0},{height:d=s[3]||s[6].height||void 0},{loading:s[4]},{decoding:s[5]},s[8]],m={};for(let n=0;n<z.length;n+=1)m=C(m,z[n]);return{c(){e=I("picture");for(let n=0;n<c.length;n+=1)c[n].c();i=K(),t=I("img"),this.h()},l(n){e=E(n,"PICTURE",{});var f=L(e);for(let o=0;o<c.length;o+=1)c[o].l(f);i=Q(f),t=E(f,"IMG",{src:!0,srcset:!0,sizes:!0,width:!0,height:!0,loading:!0,decoding:!0}),f.forEach(j),this.h()},h(){T(t,m),B(t,"background",s[6].lqip)},m(n,f){P(n,e,f);for(let o=0;o<c.length;o+=1)c[o]&&c[o].m(e,null);G(e,i),G(e,t),s[12](t),h||(p=[J(t,"click",s[10]),J(t,"load",s[11])],h=!0)},p(n,f){if(f&130){g=N(n[7]);let o;for(o=0;o<g.length;o+=1){const y=O(n,g,o);c[o]?c[o].p(y,f):(c[o]=W(y),c[o].c(),c[o].m(e,i))}for(;o<c.length;o+=1)c[o].d(1);c.length=g.length}T(t,m=se(z,[f&64&&!Z(t.src,l=n[6].src)&&{src:l},f&64&&a!==(a=n[6].srcset)&&{srcset:a},f&2&&{sizes:n[1]},f&68&&u!==(u=n[2]||n[6].width||void 0)&&{width:u},f&72&&d!==(d=n[3]||n[6].height||void 0)&&{height:d},f&16&&{loading:n[4]},f&32&&{decoding:n[5]},f&256&&n[8]])),B(t,"background",n[6].lqip)},d(n){n&&j(e),x(c,n),s[12](null),h=!1,$(p)}}}function W(s){let e,i,t;return{c(){e=I("source"),this.h()},l(l){e=E(l,"SOURCE",{type:!0,srcset:!0,sizes:!0}),this.h()},h(){k(e,"type",i="image/"+s[14]),k(e,"srcset",t=s[15]),k(e,"sizes",s[1])},m(l,a){P(l,e,a)},p(l,a){a&128&&i!==(i="image/"+l[14])&&k(e,"type",i),a&128&&t!==(t=l[15])&&k(e,"srcset",t),a&2&&k(e,"sizes",l[1])},d(l){l&&j(e)}}}function ne(s){let e,i=s[6].src&&V(s);return{c(){i&&i.c(),e=R()},l(t){i&&i.l(t),e=R()},m(t,l){i&&i.m(t,l),P(t,e,l)},p(t,[l]){t[6].src?i?i.p(t,l):(i=V(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:U,o:U,d(t){i&&i.d(t),t&&j(e)}}}function le(s,e,i){const t=["src","sizes","width","height","loading","decoding","ref"];let l=F(e,t),{src:a=[]}=e,{sizes:u=void 0}=e,{width:d=void 0}=e,{height:h=void 0}=e,{loading:p="lazy"}=e,{decoding:g="async"}=e,{ref:c=void 0}=e;const z=["heic","heif","avif","webp","jpeg","jpg","png","gif","tiff"];let m={},n=[];function f(r){M.call(this,s,r)}function o(r){M.call(this,s,r)}function y(r){ee[r?"unshift":"push"](()=>{c=r,i(0,c)})}return s.$$set=r=>{e=C(C({},e),H(r)),i(8,l=F(e,t)),"src"in r&&i(9,a=r.src),"sizes"in r&&i(1,u=r.sizes),"width"in r&&i(2,d=r.width),"height"in r&&i(3,h=r.height),"loading"in r&&i(4,p=r.loading),"decoding"in r&&i(5,g=r.decoding),"ref"in r&&i(0,c=r.ref)},s.$$.update=()=>{if(s.$$.dirty&512&&a.length){const{list:r,lqip:X}=a.reduce((b,_)=>(_.base64?b.lqip=`url('${_.base64}') no-repeat center/cover`:b.list.push(_),b),{list:[],lqip:void 0}),v=[];for(const b of z){const _=r.filter(S=>S.format===b);if(_.length){_.sort((w,q)=>w.width-q.width);const{src:S,width:Y,height:A}=_[_.length-1];v.push({format:b==="jpg"?"jpeg":b,srcset:_.reduce((w,q)=>[...w,`${q.src} ${q.width}w`],[]).join(","),src:S,width:Y,height:A})}}i(6,m={...v.pop(),lqip:X}),i(7,n=v)}},[c,u,d,h,p,g,m,n,l,a,f,o,y]}class ae extends ie{constructor(e){super(),te(this,e,le,ne,D,{src:9,sizes:1,width:2,height:3,loading:4,decoding:5,ref:0})}}export{ae as S};
