import{s as Q,n as R,k as F,l as C,m as V,v as W,r as X,w as Y,q as U,b as Z}from"./scheduler.74f9dd1d.js";import{S as x,i as $,e as A,a as P,f as j,g as E,s as ee,h as I,j as te,c as ie,K as G,l as J,x as K,A as M,J as se,k}from"./index.53f71aec.js";import{e as N}from"./each.e59479a4.js";function ne(i,e){const t={},s={},l={$$scope:1};let a=i.length;for(;a--;){const h=i[a],d=e[a];if(d){for(const u in h)u in d||(s[u]=1);for(const u in d)l[u]||(t[u]=d[u],l[u]=1);i[a]=d}else for(const u in h)l[u]=1}for(const h in s)h in t||(t[h]=void 0);return t}function fe(i){return typeof i=="object"&&i!==null?i:{}}function O(i,e,t){const s=i.slice();return s[14]=e[t].format,s[15]=e[t].srcset,s}function T(i){let e,t,s,l,a,h,d,u,y,g=N(i[7]),c=[];for(let n=0;n<g.length;n+=1)c[n]=B(O(i,g,n));let z=[{src:l=i[6].src},{srcset:a=i[6].srcset},{sizes:i[1]},{width:h=i[2]||i[6].width||void 0},{height:d=i[3]||i[6].height||void 0},{loading:i[4]},{decoding:i[5]},i[8]],m={};for(let n=0;n<z.length;n+=1)m=C(m,z[n]);return{c(){e=E("picture");for(let n=0;n<c.length;n+=1)c[n].c();t=ee(),s=E("img"),this.h()},l(n){e=I(n,"PICTURE",{});var f=te(e);for(let o=0;o<c.length;o+=1)c[o].l(f);t=ie(f),s=I(f,"IMG",{src:!0,srcset:!0,sizes:!0,width:!0,height:!0,loading:!0,decoding:!0}),f.forEach(j),this.h()},h(){G(s,m),J(s,"background",i[6].lqip)},m(n,f){P(n,e,f);for(let o=0;o<c.length;o+=1)c[o]&&c[o].m(e,null);K(e,t),K(e,s),i[12](s),u||(y=[M(s,"click",i[10]),M(s,"load",i[11])],u=!0)},p(n,f){if(f&130){g=N(n[7]);let o;for(o=0;o<g.length;o+=1){const p=O(n,g,o);c[o]?c[o].p(p,f):(c[o]=B(p),c[o].c(),c[o].m(e,t))}for(;o<c.length;o+=1)c[o].d(1);c.length=g.length}G(s,m=ne(z,[f&64&&!W(s.src,l=n[6].src)&&{src:l},f&64&&a!==(a=n[6].srcset)&&{srcset:a},f&2&&{sizes:n[1]},f&68&&h!==(h=n[2]||n[6].width||void 0)&&{width:h},f&72&&d!==(d=n[3]||n[6].height||void 0)&&{height:d},f&16&&{loading:n[4]},f&32&&{decoding:n[5]},f&256&&n[8]])),J(s,"background",n[6].lqip)},d(n){n&&j(e),se(c,n),i[12](null),u=!1,X(y)}}}function B(i){let e,t,s;return{c(){e=E("source"),this.h()},l(l){e=I(l,"SOURCE",{type:!0,srcset:!0,sizes:!0}),this.h()},h(){k(e,"type",t="image/"+i[14]),Y(e,s=i[15])||k(e,"srcset",s),k(e,"sizes",i[1])},m(l,a){P(l,e,a)},p(l,a){a&128&&t!==(t="image/"+l[14])&&k(e,"type",t),a&128&&s!==(s=l[15])&&k(e,"srcset",s),a&2&&k(e,"sizes",l[1])},d(l){l&&j(e)}}}function le(i){let e,t=i[6].src&&T(i);return{c(){t&&t.c(),e=A()},l(s){t&&t.l(s),e=A()},m(s,l){t&&t.m(s,l),P(s,e,l)},p(s,[l]){s[6].src?t?t.p(s,l):(t=T(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:R,o:R,d(s){s&&j(e),t&&t.d(s)}}}function re(i,e,t){const s=["src","sizes","width","height","loading","decoding","ref"];let l=F(e,s),{src:a=[]}=e,{sizes:h=void 0}=e,{width:d=void 0}=e,{height:u=void 0}=e,{loading:y="lazy"}=e,{decoding:g="async"}=e,{ref:c=void 0}=e;const z=["heic","heif","avif","webp","jpeg","jpg","png","gif","tiff"];let m={},n=[];function f(r){U.call(this,i,r)}function o(r){U.call(this,i,r)}function p(r){Z[r?"unshift":"push"](()=>{c=r,t(0,c)})}return i.$$set=r=>{e=C(C({},e),V(r)),t(8,l=F(e,s)),"src"in r&&t(9,a=r.src),"sizes"in r&&t(1,h=r.sizes),"width"in r&&t(2,d=r.width),"height"in r&&t(3,u=r.height),"loading"in r&&t(4,y=r.loading),"decoding"in r&&t(5,g=r.decoding),"ref"in r&&t(0,c=r.ref)},i.$$.update=()=>{if(i.$$.dirty&512&&a.length){const{list:r,lqip:D}=a.reduce((b,_)=>(_.base64?b.lqip=`url('${_.base64}') no-repeat center/cover`:b.list.push(_),b),{list:[],lqip:void 0}),v=[];for(const b of z){const _=r.filter(w=>w.format===b);if(_.length){_.sort((S,q)=>S.width-q.width);const{src:w,width:H,height:L}=_[_.length-1];v.push({format:b==="jpg"?"jpeg":b,srcset:_.reduce((S,q)=>[...S,`${q.src} ${q.width}w`],[]).join(","),src:w,width:H,height:L})}}t(6,m={...v.pop(),lqip:D}),t(7,n=v)}},[c,h,d,u,y,g,m,n,l,a,f,o,p]}class ue extends x{constructor(e){super(),$(this,e,re,le,Q,{src:9,sizes:1,width:2,height:3,loading:4,decoding:5,ref:0})}}export{ue as S,fe as a,ne as g};
