import{s as D,e as P,i as E,C as F,g as q,R as T,S as C,T as H,j as I,a as K,k as R,l as L,c as Q,Y as U,n as B,B as G,I as J,Z as V,X as x,J as $,m as k,W as M,v as ee}from"./boolean_attributes.7f0fe1a8.js";import{e as N}from"./each.1d06be43.js";import{S as te,i as ie}from"./Component.84afa5ad.js";function se(i,e){const t={},s={},l={$$scope:1};let a=i.length;for(;a--;){const h=i[a],d=e[a];if(d){for(const u in h)u in d||(s[u]=1);for(const u in d)l[u]||(t[u]=d[u],l[u]=1);i[a]=d}else for(const u in h)l[u]=1}for(const h in s)h in t||(t[h]=void 0);return t}function ae(i){return typeof i=="object"&&i!==null?i:{}}function O(i,e,t){const s=i.slice();return s[14]=e[t].format,s[15]=e[t].srcset,s}function W(i){let e,t,s,l,a,h,d,u,y,g=N(i[7]),c=[];for(let n=0;n<g.length;n+=1)c[n]=X(O(i,g,n));let z=[{src:l=i[6].src},{srcset:a=i[6].srcset},{sizes:i[1]},{width:h=i[2]||i[6].width||void 0},{height:d=i[3]||i[6].height||void 0},{loading:i[4]},{decoding:i[5]},i[8]],m={};for(let n=0;n<z.length;n+=1)m=C(m,z[n]);return{c(){e=I("picture");for(let n=0;n<c.length;n+=1)c[n].c();t=K(),s=I("img"),this.h()},l(n){e=R(n,"PICTURE",{});var f=L(e);for(let o=0;o<c.length;o+=1)c[o].l(f);t=Q(f),s=R(f,"IMG",{src:!0,srcset:!0,sizes:!0,width:!0,height:!0,loading:!0,decoding:!0}),f.forEach(q),this.h()},h(){U(s,m),B(s,"background",i[6].lqip)},m(n,f){E(n,e,f);for(let o=0;o<c.length;o+=1)c[o]&&c[o].m(e,null);G(e,t),G(e,s),i[12](s),u||(y=[J(s,"click",i[10]),J(s,"load",i[11])],u=!0)},p(n,f){if(f&130){g=N(n[7]);let o;for(o=0;o<g.length;o+=1){const p=O(n,g,o);c[o]?c[o].p(p,f):(c[o]=X(p),c[o].c(),c[o].m(e,t))}for(;o<c.length;o+=1)c[o].d(1);c.length=g.length}U(s,m=se(z,[f&64&&!V(s.src,l=n[6].src)&&{src:l},f&64&&a!==(a=n[6].srcset)&&{srcset:a},f&2&&{sizes:n[1]},f&68&&h!==(h=n[2]||n[6].width||void 0)&&{width:h},f&72&&d!==(d=n[3]||n[6].height||void 0)&&{height:d},f&16&&{loading:n[4]},f&32&&{decoding:n[5]},f&256&&n[8]])),B(s,"background",n[6].lqip)},d(n){n&&q(e),x(c,n),i[12](null),u=!1,$(y)}}}function X(i){let e,t,s;return{c(){e=I("source"),this.h()},l(l){e=R(l,"SOURCE",{type:!0,srcset:!0,sizes:!0}),this.h()},h(){k(e,"type",t="image/"+i[14]),k(e,"srcset",s=i[15]),k(e,"sizes",i[1])},m(l,a){E(l,e,a)},p(l,a){a&128&&t!==(t="image/"+l[14])&&k(e,"type",t),a&128&&s!==(s=l[15])&&k(e,"srcset",s),a&2&&k(e,"sizes",l[1])},d(l){l&&q(e)}}}function ne(i){let e,t=i[6].src&&W(i);return{c(){t&&t.c(),e=P()},l(s){t&&t.l(s),e=P()},m(s,l){t&&t.m(s,l),E(s,e,l)},p(s,[l]){s[6].src?t?t.p(s,l):(t=W(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:F,o:F,d(s){t&&t.d(s),s&&q(e)}}}function le(i,e,t){const s=["src","sizes","width","height","loading","decoding","ref"];let l=T(e,s),{src:a=[]}=e,{sizes:h=void 0}=e,{width:d=void 0}=e,{height:u=void 0}=e,{loading:y="lazy"}=e,{decoding:g="async"}=e,{ref:c=void 0}=e;const z=["heic","heif","avif","webp","jpeg","jpg","png","gif","tiff"];let m={},n=[];function f(r){M.call(this,i,r)}function o(r){M.call(this,i,r)}function p(r){ee[r?"unshift":"push"](()=>{c=r,t(0,c)})}return i.$$set=r=>{e=C(C({},e),H(r)),t(8,l=T(e,s)),"src"in r&&t(9,a=r.src),"sizes"in r&&t(1,h=r.sizes),"width"in r&&t(2,d=r.width),"height"in r&&t(3,u=r.height),"loading"in r&&t(4,y=r.loading),"decoding"in r&&t(5,g=r.decoding),"ref"in r&&t(0,c=r.ref)},i.$$.update=()=>{if(i.$$.dirty&512&&a.length){const{list:r,lqip:Y}=a.reduce((b,_)=>(_.base64?b.lqip=`url('${_.base64}') no-repeat center/cover`:b.list.push(_),b),{list:[],lqip:void 0}),v=[];for(const b of z){const _=r.filter(S=>S.format===b);if(_.length){_.sort((w,j)=>w.width-j.width);const{src:S,width:Z,height:A}=_[_.length-1];v.push({format:b==="jpg"?"jpeg":b,srcset:_.reduce((w,j)=>[...w,`${j.src} ${j.width}w`],[]).join(","),src:S,width:Z,height:A})}}t(6,m={...v.pop(),lqip:Y}),t(7,n=v)}},[c,h,d,u,y,g,m,n,l,a,f,o,p]}class fe extends te{constructor(e){super(),ie(this,e,le,ne,D,{src:9,sizes:1,width:2,height:3,loading:4,decoding:5,ref:0})}}export{fe as S,ae as a,se as g};
